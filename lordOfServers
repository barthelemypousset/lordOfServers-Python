import sys, warnings, argparse, paramiko
warnings.filterwarnings(action='ignore',module='.*paramiko.*')
client = paramiko.SSHClient()

# argparser
parser =  argparse.ArgumentParser()
group_target = parser.add_mutually_exclusive_group()
group_target.add_argument("-t", "--target", nargs=1, help="host on which you'll send the command (cannot be used with -f)")
group_target.add_argument("-f", "--file", nargs=1, help="file of hosts on which you'll send the command (cannot be used with -t)")
parser.add_argument("-u", "--user", nargs=1, help="account used for command execution", required=True)
parser.add_argument("-p", "--port", nargs=1, default="22", type=int, help="port to use")
parser.add_argument("-c", "--command", nargs=1, help="command to send", required=True)
parser.add_argument("-v", "--verbose", help="print parameter (debug)", action="store_true", default=False)
args = parser.parse_args()

# params
target = args.target
passw = args.password
cmd = args.command
user = args.user

# functions
def usage():
    print("nope !")

def verbose():
    print("Debug:")
    print(" command:"+cmd)
    print(" target:"+target)

def send():
    client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    client.connect(target, username=user, password=passw)
    #client.exec_command(cmd)
    stdin, stdout, stderr = client.exec_command(cmd)
    for line in stdout.read().splitlines():
         print (line)
    client.close()

# main code

if args.verbose:
    verbose()

if args.target:
    print("target")

if args.command:
    print("command")
